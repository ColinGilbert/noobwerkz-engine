<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>OpenMesh: Python Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="acg_logo_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenMesh
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00036.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Python Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This tutorial will introduce the basic concepts behind the OpenMesh Python Bindings.</p>
<p>We will cover the following topics:</p>
<ul>
<li>How to build the Python Bindings </li>
<li>How to create an empty mesh </li>
<li>How to add vertices and faces to a mesh </li>
<li>How to navigate on a mesh using iterators and circulators </li>
<li>How to add and remove custom properties </li>
<li>How to read and write meshes from files</li>
</ul>
<p>In addition, we will briefly discuss some of the differences between the Python Bindings and the original C++ implementation of OpenMesh.</p>
<h1><a class="anchor" id="python_build"></a>
Building the Python Bindings</h1>
<p>The Python Bindings depend on the following libraries:</p>
<ul>
<li>Python (2.7 or later) </li>
<li>Boost Python (1.54.0 or later)</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Make sure that your Boost Python and Python versions match, i.e. that Boost Python was linked against the correct Python version.</dd></dl>
<p>The Python Bindings are automatically built with OpenMesh. The generated files are written to the Build/python subdirectory of the build tree. For more information on how to build OpenMesh see <a class="el" href="a00030.html">Compiling OpenMesh</a>.</p>
<p>If CMake does not find your Python installation (or finds the wrong one) you can explicitly specify an installation by setting the following variables:</p>
<pre class="fragment">PYTHON_LIBRARY         - Path to the python library
PYTHON_INCLUDE_DIR     - Path to where Python.h is found
</pre><p>Similarly, if CMake does not find your Boost Python installation, set the following variables:</p>
<pre class="fragment">BOOST_ROOT             - Preferred installation prefix
BOOST_INCLUDEDIR       - Preferred include directory e.g. &lt;prefix&gt;/include
BOOST_LIBRARYDIR       - Preferred library directory e.g. &lt;prefix&gt;/lib
</pre><h1><a class="anchor" id="python_start"></a>
Getting Started</h1>
<p>To use the OpenMesh Python Bindings we first need to import the openmesh module:</p>
 <div class="fragment"><div class="line">from openmesh <span class="keyword">import</span> *</div>
</div><!-- fragment --></p>
<p>The module provides two mesh classes: One for polygonal meshes (PolyMesh) and one for triangle meshes (TriMesh). You should use triangle meshes whenever possible, since they are usually more efficient. In addition, some algorithms are only implemented for triangle meshes while triangle meshes inherit the full functionality of polygonal meshes.</p>
<p>The following code creates a new triangle mesh:</p>
<p><div class="fragment"><div class="line">mesh = TriMesh()</div>
</div><!-- fragment --></p>
<h1><a class="anchor" id="python_add"></a>
Adding Items to a Mesh</h1>
<p>We can add a new vertex to the mesh by calling the add_vertex() member function. This function gets a coordinate and returns a handle to the newly inserted vertex.</p>
<p><div class="fragment"><div class="line">vh0 = mesh.add_vertex(TriMesh.Point(0, 1, 0))</div>
<div class="line">vh1 = mesh.add_vertex(TriMesh.Point(1, 0, 0))</div>
<div class="line">vh2 = mesh.add_vertex(TriMesh.Point(2, 1, 0))</div>
<div class="line">vh3 = mesh.add_vertex(TriMesh.Point(0,-1, 0))</div>
<div class="line">vh4 = mesh.add_vertex(TriMesh.Point(2,-1, 0))</div>
</div><!-- fragment --></p>
<p>To add a new face to the mesh we have to call add_face(). This function gets the handles of the vertices that make up the new face and returns a handle to the newly inserted face:</p>
<p><div class="fragment"><div class="line">fh0 = mesh.add_face(vh0, vh1, vh2)</div>
<div class="line">fh1 = mesh.add_face(vh1, vh3, vh4)</div>
<div class="line">fh2 = mesh.add_face(vh0, vh3, vh1)</div>
</div><!-- fragment --></p>
<p>We can also use a Python list to add a face to the mesh:</p>
<p><div class="fragment"><div class="line">vh_list = [vh2, vh1, vh4]</div>
<div class="line">fh3 = mesh.add_face(vh_list)</div>
</div><!-- fragment --></p>
<h1><a class="anchor" id="python_iterators"></a>
Iterators and Circulators</h1>
<p>Now that we have added a couple of vertices to the mesh, we can iterate over them and print out their indices:</p>
<p><div class="fragment"><div class="line"><span class="keywordflow">for</span> vh in mesh.vertices():</div>
<div class="line">    print vh.idx()</div>
</div><!-- fragment --></p>
<p>We can also iterate over halfedges, edges and faces by calling mesh.halfedges(), mesh.edges() and mesh.faces() respectively:</p>
<p><div class="fragment"><div class="line"><span class="preprocessor"># iterate over all halfedges</span></div>
<div class="line"><span class="keywordflow">for</span> heh in mesh.halfedges():</div>
<div class="line">    print heh.idx()</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># iterate over all edges</span></div>
<div class="line"><span class="keywordflow">for</span> eh in mesh.edges():</div>
<div class="line">    print eh.idx()</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># iterate over all faces</span></div>
<div class="line"><span class="keywordflow">for</span> fh in mesh.faces():</div>
<div class="line">    print fh.idx()</div>
</div><!-- fragment --></p>
<p>To iterate over the items adjacent to another item we can use one of the circulator functions. For example, to iterate over the vertices adjacent to another vertex we can call mesh.vv() and pass the handle of the center vertex:</p>
<p><div class="fragment"><div class="line"><span class="keywordflow">for</span> vh in mesh.vv(vh1):</div>
<div class="line">    print vh.idx()</div>
</div><!-- fragment --></p>
<p>We can also iterate over the adjacent halfedges, edges and faces:</p>
<p><div class="fragment"><div class="line"><span class="preprocessor"># iterate over all incoming halfedges</span></div>
<div class="line"><span class="keywordflow">for</span> heh in mesh.vih(vh1):</div>
<div class="line">    print heh.idx()</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># iterate over all outgoing halfedges</span></div>
<div class="line"><span class="keywordflow">for</span> heh in mesh.voh(vh1):</div>
<div class="line">    print heh.idx()</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># iterate over all adjacent edges</span></div>
<div class="line"><span class="keywordflow">for</span> eh in mesh.ve(vh1):</div>
<div class="line">    print eh.idx()</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># iterate over all adjacent faces</span></div>
<div class="line"><span class="keywordflow">for</span> fh in mesh.vf(vh1):</div>
<div class="line">    print fh.idx()</div>
</div><!-- fragment --></p>
<p>To iterate over the items adjacent to a face we can use the following functions:</p>
<p><div class="fragment"><div class="line"><span class="preprocessor"># iterate over the face&#39;s vertices</span></div>
<div class="line"><span class="keywordflow">for</span> vh in mesh.fv(fh0):</div>
<div class="line">    print vh.idx()</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># iterate over the face&#39;s halfedges</span></div>
<div class="line"><span class="keywordflow">for</span> heh in mesh.fh(fh0):</div>
<div class="line">    print heh.idx()</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># iterate over the face&#39;s edges</span></div>
<div class="line"><span class="keywordflow">for</span> eh in mesh.fe(fh0):</div>
<div class="line">    print eh.idx()</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># iterate over all edge-neighboring faces</span></div>
<div class="line"><span class="keywordflow">for</span> fh in mesh.ff(fh0):</div>
<div class="line">    print fh.idx()</div>
</div><!-- fragment --></p>
<h1><a class="anchor" id="python_props"></a>
Properties</h1>
<p>OpenMesh allows us to dynamically add custom properties to a mesh. We can add properties to vertices, halfedges, edges, faces and the mesh itself. To add a property to a mesh (and later access its value) we have to use a property handle of the appropriate type:</p>
<ul>
<li>VPropHandle (for vertex properties) </li>
<li>HPropHandle (for halfedge properties) </li>
<li>EPropHandle (for edge properties) </li>
<li>FPropHandle (for face properties) </li>
<li>MPropHandle (for mesh properties)</li>
</ul>
<p>The following code shows how to add a vertex property to a mesh:</p>
<p><div class="fragment"><div class="line">prop_handle = VPropHandle()</div>
<div class="line">mesh.add_property(prop_handle, <span class="stringliteral">&quot;cogs&quot;</span>)</div>
</div><!-- fragment --></p>
<p>The second parameter of the function add_property() is optional. The parameter is used to specify a name for the new property. This name can later be used to retrieve a handle to the property using the get_property_handle() member function.</p>
<p>Now that we have added a vertex property to the mesh we can set and get its value. Here we will use the property to store the center of gravity of each vertex' neighborhood:</p>
<p><div class="fragment"><div class="line"><span class="keywordflow">for</span> vh in mesh.vertices():</div>
<div class="line">    cog = TriMesh.Point(0,0,0)</div>
<div class="line">    valence = 0</div>
<div class="line">    <span class="keywordflow">for</span> neighbor in mesh.vv(vh):</div>
<div class="line">        cog += mesh.point(neighbor)</div>
<div class="line">        valence += 1</div>
<div class="line">    mesh.set_property(prop_handle, vh, cog / valence)</div>
</div><!-- fragment --></p>
<p>Properties use Python's type system. This means that we can use the same property to store values of different types (e.g. store both strings and integers using the same vertex property). Properties are initialized to the Python built-in constant None.</p>
<p>To remove a property we have to call remove_property() with the appropriate property handle:</p>
<p><div class="fragment"><div class="line">mesh.remove_property(prop_handle)</div>
</div><!-- fragment --></p>
<h1><a class="anchor" id="python_propman"></a>
Property Managers</h1>
<p>Another way to add and remove a property is to use a property manager. A Property manager encapsulates a property and manages its lifecycle. A Property manager also provides a number of convenience functions to access the enclosed property.</p>
<p>There are four different types of property managers. One for each type of mesh item:</p>
<ul>
<li>VPropertyManager (for vertex properties) </li>
<li>HPropertyManager (for halfedge properties) </li>
<li>EPropertyManager (for edge properties) </li>
<li>FPropertyManager (for face properties)</li>
</ul>
<p>Property managers automatically add a new property to a mesh when they are initialized. Thus the following code not only creates a new vertex property manager, but also adds a new vertex property to the mesh:</p>
<p><div class="fragment"><div class="line">prop_man = VPropertyManager(mesh, <span class="stringliteral">&quot;cogs&quot;</span>)</div>
</div><!-- fragment --></p>
<p>Property managers allow us to conveniently set the property value for an entire range of mesh items:</p>
<p><div class="fragment"><div class="line">prop_man.set_range(mesh.vertices(), TriMesh.Point(0,0,0))</div>
</div><!-- fragment --></p>
<p>They also allow us to use the subscript operator to set and get property values. Here we will once again use a property to store the center of gravity of each vertex' neighborhood:</p>
<p><div class="fragment"><div class="line"><span class="keywordflow">for</span> vh in mesh.vertices():</div>
<div class="line">    valence = 0</div>
<div class="line">    <span class="keywordflow">for</span> neighbor in mesh.vv(vh):</div>
<div class="line">        prop_man[vh] += mesh.point(neighbor)</div>
<div class="line">        valence += 1</div>
<div class="line">    prop_man[vh] /= valence</div>
</div><!-- fragment --></p>
<p>Properties that are encapsulated by a property manager are automatically removed from the mesh when the property manager goes out of scope (i.e. the property manager is garbage collected).</p>
<h1><a class="anchor" id="python_io"></a>
Read and write meshes from files</h1>
<p>You can read and write meshes from files using the read_mesh() and write_mesh() functions:</p>
<p><div class="fragment"><div class="line">mesh = TriMesh()</div>
<div class="line"></div>
<div class="line"><a class="code" href="a00721.html#ac417960ec28ffdd7e7003a2b1ebb2d1c">read_mesh</a>(mesh, <span class="stringliteral">&quot;bunny.obj&quot;</span>)</div>
<div class="line"><span class="preprocessor"># modify mesh ...</span></div>
<div class="line"><span class="preprocessor">write_mesh(mesh, &quot;bunny.obj&quot;)</span></div>
</div><!-- fragment --></p>
<p>The file type is automatically deduced from the file extension. OpenMesh currently supports four file types: .off, .obj, .stl and .om</p>
<p>The behaviour of the I/O functions can be controlled by passing an instance of the Options class to either read_mesh() or write_mesh(). The class controls the behaviour of the I/O functions by means of enabled/disabled bits in a bitset:</p>
<p><div class="fragment"><div class="line">mesh = TriMesh()</div>
<div class="line">mesh.request_halfedge_normals()</div>
<div class="line">mesh.request_vertex_normals()</div>
<div class="line"></div>
<div class="line">options = Options()</div>
<div class="line">options += Options.VertexNormal</div>
<div class="line"></div>
<div class="line">result = read_mesh(mesh, &quot;bunny.obj&quot;, options)</div>
<div class="line"></div>
<div class="line">if result:</div>
<div class="line">        print &quot;everything worked&quot;</div>
<div class="line">else:</div>
<div class="line">        print &quot;something went wrong&quot;</div>
</div><!-- fragment --></p>
<p>Other available option bits include:</p>
<ol type="1">
<li>mode bits - control binary reading/writing<ul>
<li>Options.Binary</li>
<li>Options.MSB</li>
<li>Options.LSB</li>
<li>Options.Swap (MSB|LSB)</li>
</ul>
</li>
<li>property bits - controls which standard properties to read/write<ul>
<li>Options.VertexNormal</li>
<li>Options.VertexTexCoord</li>
<li>Options.VertexColor</li>
<li>Options.FaceNormal</li>
<li>Options.FaceColor</li>
<li>Options.ColorAlpha</li>
<li>Options.ColorFloat</li>
</ul>
</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>You have to pass an instance of the Options class to the I/O functions, i.e. you cannot directly pass one of the option bits. For example, directly passing Options.Binary to either one of the functions will cause an error.</dd></dl>
<p>When reading a file the options are used as hints, i.e. depending on the format we can help the reader to interpret the data correctly.</p>
<dl class="section note"><dt>Note</dt><dd>If you want to read a property from a file the property must have been requested prior to reading the file.</dd></dl>
<p>When writing the mesh the mode bits control whether to use the binary variant of the respective file format and the desired byte-ordering.</p>
<h1><a class="anchor" id="python_examples"></a>
Additional Code Examples</h1>
<p>You can use our unit tests to learn more about the OpenMesh Python Bindings. They are located in the src/Python/Unittests subdirectory.</p>
<h1><a class="anchor" id="python_cpp"></a>
Python and C++</h1>
<p>The interface of the Python Bindings is to a large extent identical to the interface of the original C++ implementation of OpenMesh. You should therefore be able to use the C++ documentation as a reference for the Python Bindings. In particular, the classes KernelT, PolyMeshT and TriMeshT provide a good overview of the available mesh member functions. That being said, there are a number of small differences. For example, whenever the C++ implementation returns a reference to an object that is managed by OpenMesh, the Python Bindings will return a copy of that object. This is due to the fact that Python does not have a language feature that is analogous to C++ references. One example of such a function is the point() member function of the PolyMesh and TriMesh classes. Unlike its C++ counterpart, the function does not return a reference to the requested point. It instead returns a copy of the point. This implies that you have to use the set_point() member function to change the value of a point. The same applies to the following functions: normal(), color(), property(), status(), etc.</p>
<p><br />
The complete source looks like this:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"># Getting Started</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">from</span> openmesh <span class="keyword">import</span> *</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;mesh = TriMesh()</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"># Adding Items to a Mesh</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"># add a a couple of vertices to the mesh</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;vh0 = mesh.add_vertex(TriMesh.Point(0, 1, 0))</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;vh1 = mesh.add_vertex(TriMesh.Point(1, 0, 0))</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;vh2 = mesh.add_vertex(TriMesh.Point(2, 1, 0))</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;vh3 = mesh.add_vertex(TriMesh.Point(0,-1, 0))</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;vh4 = mesh.add_vertex(TriMesh.Point(2,-1, 0))</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"># add a couple of faces to the mesh</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;fh0 = mesh.add_face(vh0, vh1, vh2)</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;fh1 = mesh.add_face(vh1, vh3, vh4)</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;fh2 = mesh.add_face(vh0, vh3, vh1)</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"># add another face to the mesh, this time using a list</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;vh_list = [vh2, vh1, vh4]</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;fh3 = mesh.add_face(vh_list)</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">#  0 ==== 2</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">#  |\  0 /|</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">#  | \  / |</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">#  |2  1 3|</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">#  | /  \ |</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">#  |/  1 \|</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">#  3 ==== 4</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"># Iterators</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"># iterate over all vertices</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keywordflow">for</span> vh <span class="keywordflow">in</span> mesh.vertices():</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">print</span> vh.idx()</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"># iterate over all halfedges</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keywordflow">for</span> heh <span class="keywordflow">in</span> mesh.halfedges():</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">print</span> heh.idx()</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"># iterate over all edges</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keywordflow">for</span> eh <span class="keywordflow">in</span> mesh.edges():</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">print</span> eh.idx()</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"># iterate over all faces</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keywordflow">for</span> fh <span class="keywordflow">in</span> mesh.faces():</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">print</span> fh.idx()</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"># Circulators</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"># iterate over all neighboring vertices</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keywordflow">for</span> vh <span class="keywordflow">in</span> mesh.vv(vh1):</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">print</span> vh.idx()</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"># iterate over all incoming halfedges</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keywordflow">for</span> heh <span class="keywordflow">in</span> mesh.vih(vh1):</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">print</span> heh.idx()</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"># iterate over all outgoing halfedges</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keywordflow">for</span> heh <span class="keywordflow">in</span> mesh.voh(vh1):</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">print</span> heh.idx()</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"># iterate over all adjacent edges</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keywordflow">for</span> eh <span class="keywordflow">in</span> mesh.ve(vh1):</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">print</span> eh.idx()</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"># iterate over all adjacent faces</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keywordflow">for</span> fh <span class="keywordflow">in</span> mesh.vf(vh1):</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">print</span> fh.idx()</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"># iterate over the face&#39;s vertices</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keywordflow">for</span> vh <span class="keywordflow">in</span> mesh.fv(fh0):</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">print</span> vh.idx()</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"># iterate over the face&#39;s halfedges</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keywordflow">for</span> heh <span class="keywordflow">in</span> mesh.fh(fh0):</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">print</span> heh.idx()</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"># iterate over the face&#39;s edges</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="keywordflow">for</span> eh <span class="keywordflow">in</span> mesh.fe(fh0):</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">print</span> eh.idx()</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"># iterate over all edge-neighboring faces</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="keywordflow">for</span> fh <span class="keywordflow">in</span> mesh.ff(fh0):</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">print</span> fh.idx()</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"># Properties</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;prop_handle = VPropHandle()</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;mesh.add_property(prop_handle, <span class="stringliteral">&quot;cogs&quot;</span>)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keywordflow">for</span> vh <span class="keywordflow">in</span> mesh.vertices():</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    cog = TriMesh.Point(0,0,0)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    valence = 0</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">for</span> neighbor <span class="keywordflow">in</span> mesh.vv(vh):</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        cog += mesh.point(neighbor)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        valence += 1</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    mesh.set_property(prop_handle, vh, cog / valence)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;mesh.remove_property(prop_handle)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"># Property Managers</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;prop_man = VPropertyManager(mesh, <span class="stringliteral">&quot;cogs&quot;</span>)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;prop_man.set_range(mesh.vertices(), TriMesh.Point(0,0,0))</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="keywordflow">for</span> vh <span class="keywordflow">in</span> mesh.vertices():</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    valence = 0</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">for</span> neighbor <span class="keywordflow">in</span> mesh.vv(vh):</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        prop_man[vh] += mesh.point(neighbor)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        valence += 1</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    prop_man[vh] /= valence</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"># I/O</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">##################################################</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;mesh = TriMesh()</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;read_mesh(mesh, <span class="stringliteral">&quot;bunny.obj&quot;</span>)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"># modify mesh ...</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;write_mesh(mesh, <span class="stringliteral">&quot;bunny.obj&quot;</span>)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;mesh = TriMesh()</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;mesh.request_halfedge_normals()</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;mesh.request_vertex_normals()</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;options = Options()</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;options += Options.VertexNormal</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;result = read_mesh(mesh, <span class="stringliteral">&quot;bunny.obj&quot;</span>, options)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keywordflow">if</span> result:</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">print</span> <span class="stringliteral">&quot;everything worked&quot;</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordflow">print</span> <span class="stringliteral">&quot;something went wrong&quot;</span></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<address>
<small>
<a href="http://www.rwth-graphics.de" style="text-decoration:none;">
<img src="acg_logo.png" alt="acg pic" align="middle" border=0>
</a>
Project <b>OpenMesh</b>, 
&copy;&nbsp; Computer Graphics Group, RWTH Aachen.
Documentation generated using 
<a class="el" href="http://www.doxygen.org/index.html">
<b>doxygen</b>
</a>.
</small>
</address>
</body>
</html>
